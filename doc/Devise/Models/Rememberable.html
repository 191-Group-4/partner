<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>module Devise::Models::Rememberable - RDoc Documentation</title>

<link href="../../fonts.css" rel="stylesheet">
<link href="../../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
</script>

<script src="../../js/jquery.js"></script>
<script src="../../js/navigation.js"></script>
<script src="../../js/search_index.js"></script>
<script src="../../js/search.js"></script>
<script src="../../js/searcher.js"></script>
<script src="../../js/darkfish.js"></script>


<body id="top" role="document" class="module">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>

  <ul class="link-list" role="directory">
    <li><a href="#module-Devise::Models::Rememberable-label-Options">Options</a>
    <li><a href="#module-Devise::Models::Rememberable-label-Examples">Examples</a>
  </ul>
</div>


  <div id="class-metadata">
    
    
    
    <div id="extends-section" class="nav-section">
  <h3>Extended With Modules</h3>

  <ul class="link-list">
    
  
    <li><span class="extend">ActiveSupport::Concern</span>
  
  
  </ul>
</div>

    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-required_fields">::required_fields</a>
    
    <li ><a href="#method-i-forget_me-21">#forget_me!</a>
    
    <li ><a href="#method-i-remember_expired-3F">#remember_expired?</a>
    
    <li ><a href="#method-i-remember_expires_at">#remember_expires_at</a>
    
    <li ><a href="#method-i-remember_me-21">#remember_me!</a>
    
    <li ><a href="#method-i-rememberable_options">#rememberable_options</a>
    
    <li ><a href="#method-i-rememberable_value">#rememberable_value</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="module-Devise::Models::Rememberable">
  <h1 id="module-Devise::Models::Rememberable" class="module">
    module Devise::Models::Rememberable
  </h1>

  <section class="description">
    
<p><a href="Rememberable.html">Rememberable</a> manages generating and
clearing token for remember the user from a saved cookie. <a
href="Rememberable.html">Rememberable</a> also has utility methods for
dealing with serializing the user into the cookie and back from the cookie,
trying to lookup the record based on the saved information. You probably
wouldn&#39;t use rememberable methods directly, they are used mostly
internally for handling the remember token.</p>

<h2 id="module-Devise::Models::Rememberable-label-Options">Options<span><a href="#module-Devise::Models::Rememberable-label-Options">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p><a href="Rememberable.html">Rememberable</a> adds the following options in
devise_for:</p>

<pre>* +remember_for+: the time you want the user will be remembered without
  asking for credentials. After this time the user will be blocked and
  will have to enter their credentials again. This configuration is also
  used to calculate the expires time for the cookie created to remember
  the user. By default remember_for is 2.weeks.

* +extend_remember_period+: if true, extends the user&#39;s remember period
  when remembered via cookie. False by default.

* +rememberable_options+: configuration options passed to the created cookie.</pre>

<h2 id="module-Devise::Models::Rememberable-label-Examples">Examples<span><a href="#module-Devise::Models::Rememberable-label-Examples">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<pre>User.find(1).remember_me!  # regenerating the token
User.find(1).forget_me!    # clearing the token

# generating info to put into cookies
User.serialize_into_cookie(user)

# lookup the user based on the incoming cookie information
User.serialize_from_cookie(cookie_string)</pre>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    
    <section class="attribute-method-details" class="method-section">
      <header>
        <h3>Attributes</h3>
      </header>

      
      <div id="attribute-i-extend_remember_period" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">extend_remember_period</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-remember_me" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">remember_me</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
    </section>
    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-required_fields" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">required_fields</span><span
            class="method-args">(klass)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="required_fields-source">
            <pre><span class="ruby-comment"># File lib/devise/models/rememberable.rb, line 44</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">required_fields</span>(<span class="ruby-identifier">klass</span>)
  [<span class="ruby-value">:remember_created_at</span>]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-forget_me-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">forget_me!</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>If the record is persisted, remove the remember token (but only if it
exists), and save the record without validations.</p>
          
          

          
          <div class="method-source-code" id="forget_me-21-source">
            <pre><span class="ruby-comment"># File lib/devise/models/rememberable.rb, line 58</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">forget_me!</span>
  <span class="ruby-comment"># return unless persisted?</span>
  <span class="ruby-comment"># self.remember_token = nil if respond_to?(:remember_token=)</span>
  <span class="ruby-comment"># self.remember_created_at = nil if self.class.expire_all_remember_me_on_sign_out</span>
  <span class="ruby-comment"># save(validate: false)</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-remember_expired-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">remember_expired?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Remember token should be expired if expiration time not overpass now.</p>
          
          

          
          <div class="method-source-code" id="remember_expired-3F-source">
            <pre><span class="ruby-comment"># File lib/devise/models/rememberable.rb, line 66</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">remember_expired?</span>
  <span class="ruby-identifier">remember_created_at</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> (<span class="ruby-identifier">remember_expires_at</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">utc</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-remember_expires_at" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">remember_expires_at</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Remember token expires at created time + remember_for configuration</p>
          
          

          
          <div class="method-source-code" id="remember_expires_at-source">
            <pre><span class="ruby-comment"># File lib/devise/models/rememberable.rb, line 71</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">remember_expires_at</span>
  <span class="ruby-identifier">remember_created_at</span> <span class="ruby-operator">+</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">remember_for</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-remember_me-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">remember_me!</span><span
            class="method-args">(extend_period=false)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Generate a new remember token and save the record without validations
unless remember_across_browsers is true and the user already has a valid
token.</p>
          
          

          
          <div class="method-source-code" id="remember_me-21-source">
            <pre><span class="ruby-comment"># File lib/devise/models/rememberable.rb, line 50</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">remember_me!</span>(<span class="ruby-identifier">extend_period</span>=<span class="ruby-keyword">false</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">remember_token</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">remember_token</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">generate_remember_token?</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">remember_created_at</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">utc</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">generate_remember_timestamp?</span>(<span class="ruby-identifier">extend_period</span>)
  <span class="ruby-identifier">save</span>(<span class="ruby-identifier">validate</span><span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>) <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">changed?</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-rememberable_options" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">rememberable_options</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="rememberable_options-source">
            <pre><span class="ruby-comment"># File lib/devise/models/rememberable.rb, line 88</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">rememberable_options</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">rememberable_options</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-rememberable_value" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">rememberable_value</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="rememberable_value-source">
            <pre><span class="ruby-comment"># File lib/devise/models/rememberable.rb, line 75</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">rememberable_value</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:remember_token</span>)
    <span class="ruby-identifier">remember_token</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:authenticatable_salt</span>) <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">salt</span> = <span class="ruby-identifier">authenticatable_salt</span>)
    <span class="ruby-identifier">salt</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;authenticable_salt returned nil for the #{self.class.name} model. &quot;</span>              <span class="ruby-string">&quot;In order to use rememberable, you must ensure a password is always set &quot;</span>              <span class="ruby-string">&quot;or have a remember_token column in your model or implement your own &quot;</span>              <span class="ruby-string">&quot;rememberable_value in the model with custom logic.&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://rdoc.rubyforge.org">RDoc</a> 4.1.2.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

