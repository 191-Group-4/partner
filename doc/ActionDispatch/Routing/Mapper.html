<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class ActionDispatch::Routing::Mapper - RDoc Documentation</title>

<link href="../../fonts.css" rel="stylesheet">
<link href="../../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
</script>

<script src="../../js/jquery.js"></script>
<script src="../../js/navigation.js"></script>
<script src="../../js/search_index.js"></script>
<script src="../../js/search.js"></script>
<script src="../../js/searcher.js"></script>
<script src="../../js/darkfish.js"></script>


<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link"><a href="../../Object.html">Object</a>
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-i-as">#as</a>
    
    <li ><a href="#method-i-authenticate">#authenticate</a>
    
    <li ><a href="#method-i-authenticated">#authenticated</a>
    
    <li ><a href="#method-i-constraints_for">#constraints_for</a>
    
    <li ><a href="#method-i-devise_for">#devise_for</a>
    
    <li ><a href="#method-i-devise_scope">#devise_scope</a>
    
    <li ><a href="#method-i-unauthenticated">#unauthenticated</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-ActionDispatch::Routing::Mapper">
  <h1 id="class-ActionDispatch::Routing::Mapper" class="class">
    class ActionDispatch::Routing::Mapper
  </h1>

  <section class="description">
    
  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    
    <section class="constants-list">
      <header>
        <h3>Constants</h3>
      </header>
      <dl>
      
        <dt id="DEVISE_SCOPE_KEYS">DEVISE_SCOPE_KEYS
        
        <dd>
        
      
      </dl>
    </section>
    

    

    
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-as" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">as</span><span
            class="method-args">(scope)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="Mapper.html#method-i-devise_scope">devise_scope</a>
        </div>
        
      </div>

    
      <div id="method-i-authenticate" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">authenticate</span><span
            class="method-args">(scope=nil, block=nil) { || ... }</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Allow you to add authentication request from the router. Takes an optional
scope and block to provide constraints on the model instance itself.</p>

<pre class="ruby"><span class="ruby-identifier">authenticate</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">resources</span> :<span class="ruby-identifier">post</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">authenticate</span>(:<span class="ruby-identifier">admin</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">resources</span> :<span class="ruby-identifier">users</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">authenticate</span> :<span class="ruby-identifier">user</span>, <span class="ruby-identifier">lambda</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">u</span><span class="ruby-operator">|</span> <span class="ruby-identifier">u</span>.<span class="ruby-identifier">role</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;admin&quot;</span>} <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">root</span> <span class="ruby-identifier">to</span><span class="ruby-operator">:</span> <span class="ruby-node">&quot;admin/dashboard#show&quot;</span>, <span class="ruby-identifier">as</span><span class="ruby-operator">:</span> :<span class="ruby-identifier">user_root</span>
<span class="ruby-keyword">end</span>
</pre>
          
          

          
          <div class="method-source-code" id="authenticate-source">
            <pre><span class="ruby-comment"># File lib/devise/rails/routes.rb, line 271</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">authenticate</span>(<span class="ruby-identifier">scope</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">block</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">constraints_for</span>(<span class="ruby-value">:authenticate!</span>, <span class="ruby-identifier">scope</span>, <span class="ruby-identifier">block</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">yield</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-authenticated" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">authenticated</span><span
            class="method-args">(scope=nil, block=nil) { || ... }</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Allow you to route based on whether a scope is authenticated. You can
optionally specify which scope and a block. The block accepts a model and
allows extra constraints to be done on the instance.</p>

<pre class="ruby"><span class="ruby-identifier">authenticated</span> :<span class="ruby-identifier">admin</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">root</span> <span class="ruby-identifier">to</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;admin/dashboard#show&#39;</span>, <span class="ruby-identifier">as</span><span class="ruby-operator">:</span> :<span class="ruby-identifier">admin_root</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">authenticated</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">root</span> <span class="ruby-identifier">to</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;dashboard#show&#39;</span>, <span class="ruby-identifier">as</span><span class="ruby-operator">:</span> :<span class="ruby-identifier">authenticated_root</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">authenticated</span> :<span class="ruby-identifier">user</span>, <span class="ruby-identifier">lambda</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">u</span><span class="ruby-operator">|</span> <span class="ruby-identifier">u</span>.<span class="ruby-identifier">role</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;admin&quot;</span>} <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">root</span> <span class="ruby-identifier">to</span><span class="ruby-operator">:</span> <span class="ruby-node">&quot;admin/dashboard#show&quot;</span>, <span class="ruby-identifier">as</span><span class="ruby-operator">:</span> :<span class="ruby-identifier">user_root</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">root</span> <span class="ruby-identifier">to</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;landing#show&#39;</span>
</pre>
          
          

          
          <div class="method-source-code" id="authenticated-source">
            <pre><span class="ruby-comment"># File lib/devise/rails/routes.rb, line 295</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">authenticated</span>(<span class="ruby-identifier">scope</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">block</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">constraints_for</span>(<span class="ruby-value">:authenticate?</span>, <span class="ruby-identifier">scope</span>, <span class="ruby-identifier">block</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">yield</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-devise_for" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">devise_for</span><span
            class="method-args">(*resources)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Includes <a href="Mapper.html#method-i-devise_for">#devise_for</a> method
for routes. This method is responsible to generate all needed routes for
devise, based on what modules you have defined in your model.</p>

<h4 id="method-i-devise_for-label-Examples">Examples<span><a href="#method-i-devise_for-label-Examples">&para;</a> <a href="#documentation">&uarr;</a></span></h4>

<p>Let&#39;s say you have an <a href="../../User.html">User</a> model
configured to use authenticatable, confirmable and recoverable modules.
After creating this inside your routes:</p>

<pre>devise_for :users</pre>

<p>This method is going to look inside your <a href="../../User.html">User</a>
model and create the needed routes:</p>

<pre># Session routes for Authenticatable (default)
     new_user_session GET    /users/sign_in                    {controller:&quot;devise/sessions&quot;, action:&quot;new&quot;}
         user_session POST   /users/sign_in                    {controller:&quot;devise/sessions&quot;, action:&quot;create&quot;}
 destroy_user_session DELETE /users/sign_out                   {controller:&quot;devise/sessions&quot;, action:&quot;destroy&quot;}

# Password routes for Recoverable, if User model has :recoverable configured
    new_user_password GET    /users/password/new(.:format)     {controller:&quot;devise/passwords&quot;, action:&quot;new&quot;}
   edit_user_password GET    /users/password/edit(.:format)    {controller:&quot;devise/passwords&quot;, action:&quot;edit&quot;}
        user_password PUT    /users/password(.:format)         {controller:&quot;devise/passwords&quot;, action:&quot;update&quot;}
                      POST   /users/password(.:format)         {controller:&quot;devise/passwords&quot;, action:&quot;create&quot;}

# Confirmation routes for Confirmable, if User model has :confirmable configured
new_user_confirmation GET    /users/confirmation/new(.:format) {controller:&quot;devise/confirmations&quot;, action:&quot;new&quot;}
    user_confirmation GET    /users/confirmation(.:format)     {controller:&quot;devise/confirmations&quot;, action:&quot;show&quot;}
                      POST   /users/confirmation(.:format)     {controller:&quot;devise/confirmations&quot;, action:&quot;create&quot;}</pre>

<h4 id="method-i-devise_for-label-Routes+integration">Routes integration<span><a href="#method-i-devise_for-label-Routes+integration">&para;</a> <a href="#documentation">&uarr;</a></span></h4>

<p><code>devise_for</code> is meant to play nicely with other routes methods.
For example, by calling <code>devise_for</code> inside a namespace, it
automatically nests your devise controllers:</p>

<pre>namespace :publisher do
  devise_for :account
end</pre>

<p>The snippet above will use publisher/sessions controller instead of
devise/sessions controller. You can revert this change or configure it
directly by passing the :module option described below to
<code>devise_for</code>.</p>

<p>Also note that when you use a namespace it will affect all the helpers and
methods for controllers and views. For example, using the above setup
you&#39;ll end with following methods: current_publisher_account,
authenticate_publisher_account!, publisher_account_signed_in, etc.</p>

<p>The only aspect not affect by the router configuration is the model name.
The model name can be explicitly set via the :class_name option.</p>

<h4 id="method-i-devise_for-label-Options">Options<span><a href="#method-i-devise_for-label-Options">&para;</a> <a href="#documentation">&uarr;</a></span></h4>

<p>You can configure your routes with some options:</p>

<pre class="ruby"><span class="ruby-operator">*</span> <span class="ruby-identifier">class_name</span><span class="ruby-operator">:</span> <span class="ruby-identifier">setup</span> <span class="ruby-identifier">a</span> <span class="ruby-identifier">different</span> <span class="ruby-keyword">class</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">be</span> <span class="ruby-identifier">looked</span> <span class="ruby-identifier">up</span> <span class="ruby-identifier">by</span> <span class="ruby-identifier">devise</span>, <span class="ruby-keyword">if</span> <span class="ruby-identifier">it</span> <span class="ruby-identifier">cannot</span> <span class="ruby-identifier">be</span>
  <span class="ruby-identifier">properly</span> <span class="ruby-identifier">found</span> <span class="ruby-identifier">by</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">route</span> <span class="ruby-identifier">name</span>.

    <span class="ruby-identifier">devise_for</span> :<span class="ruby-identifier">users</span>, <span class="ruby-identifier">class_name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Account&#39;</span>

<span class="ruby-operator">*</span> <span class="ruby-identifier">path</span><span class="ruby-operator">:</span> <span class="ruby-identifier">allows</span> <span class="ruby-identifier">you</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">setup</span> <span class="ruby-identifier">path</span> <span class="ruby-identifier">name</span> <span class="ruby-identifier">that</span> <span class="ruby-identifier">will</span> <span class="ruby-identifier">be</span> <span class="ruby-identifier">used</span>, <span class="ruby-identifier">as</span> <span class="ruby-identifier">rails</span> <span class="ruby-identifier">routes</span> <span class="ruby-identifier">does</span>.
  <span class="ruby-constant">The</span> <span class="ruby-identifier">following</span> <span class="ruby-identifier">route</span> <span class="ruby-identifier">configuration</span> <span class="ruby-identifier">would</span> <span class="ruby-identifier">setup</span> <span class="ruby-identifier">your</span> <span class="ruby-identifier">route</span> <span class="ruby-identifier">as</span> <span class="ruby-regexp">/accounts instead of /use</span><span class="ruby-identifier">rs</span><span class="ruby-operator">:</span>

    <span class="ruby-identifier">devise_for</span> :<span class="ruby-identifier">users</span>, <span class="ruby-identifier">path</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;accounts&#39;</span>

<span class="ruby-operator">*</span> <span class="ruby-identifier">singular</span><span class="ruby-operator">:</span> <span class="ruby-identifier">setup</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">singular</span> <span class="ruby-identifier">name</span> <span class="ruby-keyword">for</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">given</span> <span class="ruby-identifier">resource</span>. <span class="ruby-constant">This</span> <span class="ruby-identifier">is</span> <span class="ruby-identifier">used</span> <span class="ruby-identifier">as</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">instance</span> <span class="ruby-identifier">variable</span>
  <span class="ruby-identifier">name</span> <span class="ruby-keyword">in</span> <span class="ruby-identifier">controller</span>, <span class="ruby-identifier">as</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">name</span> <span class="ruby-keyword">in</span> <span class="ruby-identifier">routes</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">scope</span> <span class="ruby-identifier">given</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">warden</span>.

    <span class="ruby-identifier">devise_for</span> :<span class="ruby-identifier">users</span>, <span class="ruby-identifier">singular</span><span class="ruby-operator">:</span> :<span class="ruby-identifier">user</span>

<span class="ruby-operator">*</span> <span class="ruby-identifier">path_names</span><span class="ruby-operator">:</span> <span class="ruby-identifier">configure</span> <span class="ruby-identifier">different</span> <span class="ruby-identifier">path</span> <span class="ruby-identifier">names</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">overwrite</span> <span class="ruby-identifier">defaults</span> :<span class="ruby-identifier">sign_in</span>, :<span class="ruby-identifier">sign_out</span>, :<span class="ruby-identifier">sign_up</span>,
  :<span class="ruby-identifier">password</span>, :<span class="ruby-identifier">confirmation</span>, :<span class="ruby-identifier">unlock</span>.

    <span class="ruby-identifier">devise_for</span> :<span class="ruby-identifier">users</span>, <span class="ruby-identifier">path_names</span><span class="ruby-operator">:</span> {
      <span class="ruby-identifier">sign_in</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;login&#39;</span>, <span class="ruby-identifier">sign_out</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;logout&#39;</span>,
      <span class="ruby-identifier">password</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;secret&#39;</span>, <span class="ruby-identifier">confirmation</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;verification&#39;</span>,
      <span class="ruby-identifier">registration</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;register&#39;</span>, <span class="ruby-identifier">edit</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;edit/profile&#39;</span>
    }

<span class="ruby-operator">*</span> <span class="ruby-identifier">controllers</span><span class="ruby-operator">:</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">controller</span> <span class="ruby-identifier">which</span> <span class="ruby-identifier">should</span> <span class="ruby-identifier">be</span> <span class="ruby-identifier">used</span>. <span class="ruby-constant">All</span> <span class="ruby-identifier">routes</span> <span class="ruby-identifier">by</span> <span class="ruby-identifier">default</span> <span class="ruby-identifier">points</span> <span class="ruby-identifier">to</span> <span class="ruby-constant">Devise</span> <span class="ruby-identifier">controllers</span>.
  <span class="ruby-constant">However</span>, <span class="ruby-keyword">if</span> <span class="ruby-identifier">you</span> <span class="ruby-identifier">want</span> <span class="ruby-identifier">them</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">point</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">custom</span> <span class="ruby-identifier">controller</span>, <span class="ruby-identifier">you</span> <span class="ruby-identifier">should</span> <span class="ruby-identifier">do</span><span class="ruby-operator">:</span>

    <span class="ruby-identifier">devise_for</span> :<span class="ruby-identifier">users</span>, <span class="ruby-identifier">controllers</span><span class="ruby-operator">:</span> { <span class="ruby-identifier">sessions</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;users/sessions&quot;</span> }

<span class="ruby-operator">*</span> <span class="ruby-identifier">failure_app</span><span class="ruby-operator">:</span> <span class="ruby-identifier">a</span> <span class="ruby-identifier">rack</span> <span class="ruby-identifier">app</span> <span class="ruby-identifier">which</span> <span class="ruby-identifier">is</span> <span class="ruby-identifier">invoked</span> <span class="ruby-identifier">whenever</span> <span class="ruby-identifier">there</span> <span class="ruby-identifier">is</span> <span class="ruby-identifier">a</span> <span class="ruby-identifier">failure</span>. <span class="ruby-constant">Strings</span> <span class="ruby-identifier">representing</span> <span class="ruby-identifier">a</span> <span class="ruby-identifier">given</span>
  <span class="ruby-identifier">are</span> <span class="ruby-identifier">also</span> <span class="ruby-identifier">allowed</span> <span class="ruby-identifier">as</span> <span class="ruby-identifier">parameter</span>.

<span class="ruby-operator">*</span> <span class="ruby-identifier">sign_out_via</span><span class="ruby-operator">:</span> <span class="ruby-identifier">the</span> <span class="ruby-constant">HTTP</span> <span class="ruby-identifier">method</span>(<span class="ruby-identifier">s</span>) <span class="ruby-identifier">accepted</span> <span class="ruby-keyword">for</span> <span class="ruby-identifier">the</span> :<span class="ruby-identifier">sign_out</span> <span class="ruby-identifier">action</span> (<span class="ruby-identifier">default</span><span class="ruby-operator">:</span> :<span class="ruby-identifier">get</span>),
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">you</span> <span class="ruby-identifier">wish</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">restrict</span> <span class="ruby-identifier">this</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">accept</span> <span class="ruby-identifier">only</span> :<span class="ruby-identifier">post</span> <span class="ruby-keyword">or</span> :<span class="ruby-identifier">delete</span> <span class="ruby-identifier">requests</span> <span class="ruby-identifier">you</span> <span class="ruby-identifier">should</span> <span class="ruby-identifier">do</span><span class="ruby-operator">:</span>

    <span class="ruby-identifier">devise_for</span> :<span class="ruby-identifier">users</span>, <span class="ruby-identifier">sign_out_via</span><span class="ruby-operator">:</span> [ :<span class="ruby-identifier">post</span>, :<span class="ruby-identifier">delete</span> ]

  <span class="ruby-constant">You</span> <span class="ruby-identifier">need</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">make</span> <span class="ruby-identifier">sure</span> <span class="ruby-identifier">that</span> <span class="ruby-identifier">your</span> <span class="ruby-identifier">sign_out</span> <span class="ruby-identifier">controls</span> <span class="ruby-identifier">trigger</span> <span class="ruby-identifier">a</span> <span class="ruby-identifier">request</span> <span class="ruby-identifier">with</span> <span class="ruby-identifier">a</span> <span class="ruby-identifier">matching</span> <span class="ruby-constant">HTTP</span> <span class="ruby-identifier">method</span>.

<span class="ruby-operator">*</span> <span class="ruby-identifier">module</span><span class="ruby-operator">:</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">namespace</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">find</span> <span class="ruby-identifier">controllers</span> (<span class="ruby-identifier">default</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;devise&quot;</span>, <span class="ruby-identifier">thus</span>
  <span class="ruby-identifier">accessing</span> <span class="ruby-identifier">devise</span><span class="ruby-operator">/</span><span class="ruby-identifier">sessions</span>, <span class="ruby-identifier">devise</span><span class="ruby-operator">/</span><span class="ruby-identifier">registrations</span>, <span class="ruby-keyword">and</span> <span class="ruby-identifier">so</span> <span class="ruby-identifier">on</span>). <span class="ruby-constant">If</span> <span class="ruby-identifier">you</span> <span class="ruby-identifier">want</span>
  <span class="ruby-identifier">to</span> <span class="ruby-identifier">namespace</span> <span class="ruby-identifier">all</span> <span class="ruby-identifier">at</span> <span class="ruby-identifier">once</span>, <span class="ruby-identifier">use</span> <span class="ruby-identifier">module</span><span class="ruby-operator">:</span>

    <span class="ruby-identifier">devise_for</span> :<span class="ruby-identifier">users</span>, <span class="ruby-identifier">module</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;users&quot;</span>

<span class="ruby-operator">*</span> <span class="ruby-identifier">skip</span><span class="ruby-operator">:</span> <span class="ruby-identifier">tell</span> <span class="ruby-identifier">which</span> <span class="ruby-identifier">controller</span> <span class="ruby-identifier">you</span> <span class="ruby-identifier">want</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">skip</span> <span class="ruby-identifier">routes</span> <span class="ruby-identifier">from</span> <span class="ruby-identifier">being</span> <span class="ruby-identifier">created</span>.
  <span class="ruby-constant">It</span> <span class="ruby-identifier">accepts</span> :<span class="ruby-identifier">all</span> <span class="ruby-identifier">as</span> <span class="ruby-identifier">an</span> <span class="ruby-identifier">option</span>, <span class="ruby-identifier">meaning</span> <span class="ruby-identifier">it</span> <span class="ruby-identifier">will</span> <span class="ruby-keyword">not</span> <span class="ruby-identifier">generate</span> <span class="ruby-identifier">any</span> <span class="ruby-identifier">route</span> <span class="ruby-identifier">at</span> <span class="ruby-identifier">all</span><span class="ruby-operator">:</span>

    <span class="ruby-identifier">devise_for</span> :<span class="ruby-identifier">users</span>, <span class="ruby-identifier">skip</span><span class="ruby-operator">:</span> :<span class="ruby-identifier">sessions</span>

<span class="ruby-operator">*</span> <span class="ruby-identifier">only</span><span class="ruby-operator">:</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">opposite</span> <span class="ruby-identifier">of</span> :<span class="ruby-identifier">skip</span>, <span class="ruby-identifier">tell</span> <span class="ruby-identifier">which</span> <span class="ruby-identifier">controllers</span> <span class="ruby-identifier">only</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">generate</span> <span class="ruby-identifier">routes</span> <span class="ruby-identifier">to</span><span class="ruby-operator">:</span>

    <span class="ruby-identifier">devise_for</span> :<span class="ruby-identifier">users</span>, <span class="ruby-identifier">only</span><span class="ruby-operator">:</span> :<span class="ruby-identifier">sessions</span>

<span class="ruby-operator">*</span> <span class="ruby-identifier">skip_helpers</span><span class="ruby-operator">:</span> <span class="ruby-identifier">skip</span> <span class="ruby-identifier">generating</span> <span class="ruby-constant">Devise</span> <span class="ruby-identifier">url</span> <span class="ruby-identifier">helpers</span> <span class="ruby-identifier">like</span> <span class="ruby-identifier">new_session_path</span>(<span class="ruby-ivar">@user</span>).
  <span class="ruby-constant">This</span> <span class="ruby-identifier">is</span> <span class="ruby-identifier">useful</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">avoid</span> <span class="ruby-identifier">conflicts</span> <span class="ruby-identifier">with</span> <span class="ruby-identifier">previous</span> <span class="ruby-identifier">routes</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">is</span> <span class="ruby-keyword">false</span> <span class="ruby-identifier">by</span> <span class="ruby-identifier">default</span>.
  <span class="ruby-constant">It</span> <span class="ruby-identifier">accepts</span> <span class="ruby-keyword">true</span> <span class="ruby-identifier">as</span> <span class="ruby-identifier">option</span>, <span class="ruby-identifier">meaning</span> <span class="ruby-identifier">it</span> <span class="ruby-identifier">will</span> <span class="ruby-identifier">skip</span> <span class="ruby-identifier">all</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">helpers</span> <span class="ruby-keyword">for</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">controllers</span>
  <span class="ruby-identifier">given</span> <span class="ruby-keyword">in</span> :<span class="ruby-identifier">skip</span> <span class="ruby-identifier">but</span> <span class="ruby-identifier">it</span> <span class="ruby-identifier">also</span> <span class="ruby-identifier">accepts</span> <span class="ruby-identifier">specific</span> <span class="ruby-identifier">helpers</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">be</span> <span class="ruby-identifier">skipped</span><span class="ruby-operator">:</span>

    <span class="ruby-identifier">devise_for</span> :<span class="ruby-identifier">users</span>, <span class="ruby-identifier">skip</span><span class="ruby-operator">:</span> [:<span class="ruby-identifier">registrations</span>, :<span class="ruby-identifier">confirmations</span>], <span class="ruby-identifier">skip_helpers</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>
    <span class="ruby-identifier">devise_for</span> :<span class="ruby-identifier">users</span>, <span class="ruby-identifier">skip_helpers</span><span class="ruby-operator">:</span> [:<span class="ruby-identifier">registrations</span>, :<span class="ruby-identifier">confirmations</span>]

<span class="ruby-operator">*</span> <span class="ruby-identifier">format</span><span class="ruby-operator">:</span> <span class="ruby-identifier">include</span> <span class="ruby-string">&quot;(.:format)&quot;</span> <span class="ruby-keyword">in</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">generated</span> <span class="ruby-identifier">routes?</span> <span class="ruby-keyword">true</span> <span class="ruby-identifier">by</span> <span class="ruby-identifier">default</span>, <span class="ruby-identifier">set</span> <span class="ruby-identifier">to</span> <span class="ruby-keyword">false</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">disable</span><span class="ruby-operator">:</span>

    <span class="ruby-identifier">devise_for</span> :<span class="ruby-identifier">users</span>, <span class="ruby-identifier">format</span><span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>

<span class="ruby-operator">*</span> <span class="ruby-identifier">constraints</span><span class="ruby-operator">:</span> <span class="ruby-identifier">works</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">same</span> <span class="ruby-identifier">as</span> <span class="ruby-constant">Rails</span><span class="ruby-string">&#39; constraints

* defaults: works the same as Rails&#39;</span> <span class="ruby-identifier">defaults</span>

<span class="ruby-operator">*</span> <span class="ruby-identifier">router_name</span><span class="ruby-operator">:</span> <span class="ruby-identifier">allows</span> <span class="ruby-identifier">application</span> <span class="ruby-identifier">level</span> <span class="ruby-identifier">router</span> <span class="ruby-identifier">name</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">be</span> <span class="ruby-identifier">overwritten</span> <span class="ruby-keyword">for</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">current</span> <span class="ruby-identifier">scope</span>
</pre>

<h4 id="method-i-devise_for-label-Scoping">Scoping<span><a href="#method-i-devise_for-label-Scoping">&para;</a> <a href="#documentation">&uarr;</a></span></h4>

<p>Following Rails 3 routes DSL, you can nest <a
href="Mapper.html#method-i-devise_for">#devise_for</a> calls inside a
scope:</p>

<pre>scope &quot;/my&quot; do
  devise_for :users
end</pre>

<p>However, since Devise uses the request path to retrieve the current user,
this has one caveat: If you are using a dynamic segment, like so …</p>

<pre>scope &quot;:locale&quot; do
  devise_for :users
end</pre>

<p>you are required to configure default_url_options in your <a
href="../../ApplicationController.html">ApplicationController</a> class, so
Devise can pick it:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">ApplicationController</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">default_url_options</span>
    { <span class="ruby-identifier">locale</span><span class="ruby-operator">:</span> <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">locale</span> }
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<h4 id="method-i-devise_for-label-Adding+custom+actions+to+override+controllers">Adding custom actions to override controllers<span><a href="#method-i-devise_for-label-Adding+custom+actions+to+override+controllers">&para;</a> <a href="#documentation">&uarr;</a></span></h4>

<p>You can pass a block to <a
href="Mapper.html#method-i-devise_for">#devise_for</a> that will add any
routes defined in the block to Devise&#39;s list of known actions.  This is
important if you add a custom action to a controller that overrides an out
of the box Devise controller. For example:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">RegistrationsController</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Devise</span><span class="ruby-operator">::</span><span class="ruby-constant">RegistrationsController</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">update</span>
     <span class="ruby-comment"># do something different here</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">deactivate</span>
    <span class="ruby-comment"># not a standard action</span>
    <span class="ruby-comment"># deactivate code here</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>In order to get Devise to recognize the deactivate action, your <a
href="Mapper.html#method-i-devise_scope">#devise_scope</a> entry should
look like this:</p>

<pre>devise_scope :owner do
  post &quot;deactivate&quot;, to: &quot;registrations#deactivate&quot;, as: &quot;deactivate_registration&quot;
end</pre>
          
          

          
          <div class="method-source-code" id="devise_for-source">
            <pre><span class="ruby-comment"># File lib/devise/rails/routes.rb, line 207</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">devise_for</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">resources</span>)
  <span class="ruby-ivar">@devise_finalized</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">raise_no_secret_key</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">Devise</span>.<span class="ruby-identifier">secret_key</span>
  <span class="ruby-identifier">options</span> = <span class="ruby-identifier">resources</span>.<span class="ruby-identifier">extract_options!</span>

  <span class="ruby-identifier">options</span>[<span class="ruby-value">:as</span>]          <span class="ruby-operator">||=</span> <span class="ruby-ivar">@scope</span>[<span class="ruby-value">:as</span>]     <span class="ruby-keyword">if</span> <span class="ruby-ivar">@scope</span>[<span class="ruby-value">:as</span>].<span class="ruby-identifier">present?</span>
  <span class="ruby-identifier">options</span>[<span class="ruby-value">:module</span>]      <span class="ruby-operator">||=</span> <span class="ruby-ivar">@scope</span>[<span class="ruby-value">:module</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@scope</span>[<span class="ruby-value">:module</span>].<span class="ruby-identifier">present?</span>
  <span class="ruby-identifier">options</span>[<span class="ruby-value">:path_prefix</span>] <span class="ruby-operator">||=</span> <span class="ruby-ivar">@scope</span>[<span class="ruby-value">:path</span>]   <span class="ruby-keyword">if</span> <span class="ruby-ivar">@scope</span>[<span class="ruby-value">:path</span>].<span class="ruby-identifier">present?</span>
  <span class="ruby-identifier">options</span>[<span class="ruby-value">:path_names</span>]    = (<span class="ruby-ivar">@scope</span>[<span class="ruby-value">:path_names</span>] <span class="ruby-operator">||</span> {}).<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">options</span>[<span class="ruby-value">:path_names</span>] <span class="ruby-operator">||</span> {})
  <span class="ruby-identifier">options</span>[<span class="ruby-value">:constraints</span>]   = (<span class="ruby-ivar">@scope</span>[<span class="ruby-value">:constraints</span>] <span class="ruby-operator">||</span> {}).<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">options</span>[<span class="ruby-value">:constraints</span>] <span class="ruby-operator">||</span> {})
  <span class="ruby-identifier">options</span>[<span class="ruby-value">:defaults</span>]      = (<span class="ruby-ivar">@scope</span>[<span class="ruby-value">:defaults</span>] <span class="ruby-operator">||</span> {}).<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">options</span>[<span class="ruby-value">:defaults</span>] <span class="ruby-operator">||</span> {})
  <span class="ruby-identifier">options</span>[<span class="ruby-value">:options</span>]       = <span class="ruby-ivar">@scope</span>[<span class="ruby-value">:options</span>] <span class="ruby-operator">||</span> {}
  <span class="ruby-identifier">options</span>[<span class="ruby-value">:options</span>][<span class="ruby-value">:format</span>] = <span class="ruby-keyword">false</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:format</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span>

  <span class="ruby-identifier">resources</span>.<span class="ruby-identifier">map!</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:to_sym</span>)

  <span class="ruby-identifier">resources</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">resource</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">mapping</span> = <span class="ruby-constant">Devise</span>.<span class="ruby-identifier">add_mapping</span>(<span class="ruby-identifier">resource</span>, <span class="ruby-identifier">options</span>)

    <span class="ruby-keyword">begin</span>
      <span class="ruby-identifier">raise_no_devise_method_error!</span>(<span class="ruby-identifier">mapping</span>.<span class="ruby-identifier">class_name</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">mapping</span>.<span class="ruby-identifier">to</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:devise</span>)
    <span class="ruby-keyword">rescue</span> <span class="ruby-constant">NameError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">mapping</span>.<span class="ruby-identifier">class_name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">resource</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">classify</span>
      <span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;[WARNING] You provided devise_for #{resource.inspect} but there is &quot;</span>              <span class="ruby-node">&quot;no model #{mapping.class_name} defined in your application&quot;</span>
      <span class="ruby-keyword">next</span>
    <span class="ruby-keyword">rescue</span> <span class="ruby-constant">NoMethodError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">&quot;undefined method `devise&#39;&quot;</span>)
      <span class="ruby-identifier">raise_no_devise_method_error!</span>(<span class="ruby-identifier">mapping</span>.<span class="ruby-identifier">class_name</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:controllers</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:controllers</span>][<span class="ruby-value">:omniauth_callbacks</span>]
      <span class="ruby-keyword">unless</span> <span class="ruby-identifier">mapping</span>.<span class="ruby-identifier">omniauthable?</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Mapping omniauth_callbacks on a resource that is not omniauthable\n&quot;</span>                <span class="ruby-node">&quot;Please add `devise :omniauthable` to the `#{mapping.class_name}` model&quot;</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">routes</span> = <span class="ruby-identifier">mapping</span>.<span class="ruby-identifier">used_routes</span>

    <span class="ruby-identifier">devise_scope</span> <span class="ruby-identifier">mapping</span>.<span class="ruby-identifier">name</span> <span class="ruby-keyword">do</span>
      <span class="ruby-identifier">with_devise_exclusive_scope</span> <span class="ruby-identifier">mapping</span>.<span class="ruby-identifier">fullpath</span>, <span class="ruby-identifier">mapping</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">options</span> <span class="ruby-keyword">do</span>
        <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">mod</span><span class="ruby-operator">|</span> <span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;devise_#{mod}&quot;</span>, <span class="ruby-identifier">mapping</span>, <span class="ruby-identifier">mapping</span>.<span class="ruby-identifier">controllers</span>) }
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-devise_scope" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">devise_scope</span><span
            class="method-args">(scope) { || ... }</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Sets the devise scope to be used in the controller. If you have custom
routes, you are required to call this method (also aliased as :as) in order
to specify to which controller it is targetted.</p>

<pre>as :user do
  get &quot;sign_in&quot;, to: &quot;devise/sessions#new&quot;
end</pre>

<p>Notice you cannot have two scopes mapping to the same URL. And remember, if
you try to access a devise controller without specifying a scope, it will
raise ActionNotFound error.</p>

<p>Also be aware of that &#39;devise_scope&#39; and &#39;as&#39; use the
singular form of the noun where other devise route commands expect the
plural form. This would be a good and working example.</p>

<pre class="ruby"><span class="ruby-identifier">devise_scope</span> :<span class="ruby-identifier">user</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">get</span> <span class="ruby-string">&quot;/some/route&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;some_devise_controller&quot;</span>
<span class="ruby-keyword">end</span>
<span class="ruby-identifier">devise_for</span> :<span class="ruby-identifier">users</span>
</pre>

<p>Notice and be aware of the differences above between :user and :users</p>
          
          

          
          <div class="method-source-code" id="devise_scope-source">
            <pre><span class="ruby-comment"># File lib/devise/rails/routes.rb, line 344</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">devise_scope</span>(<span class="ruby-identifier">scope</span>)
  <span class="ruby-identifier">constraint</span> = <span class="ruby-identifier">lambda</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">request</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;devise.mapping&quot;</span>] = <span class="ruby-constant">Devise</span>.<span class="ruby-identifier">mappings</span>[<span class="ruby-identifier">scope</span>]
    <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">constraints</span>(<span class="ruby-identifier">constraint</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">yield</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="Mapper.html#method-i-as">as</a>
        </div>
        

        
      </div>

    
      <div id="method-i-unauthenticated" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">unauthenticated</span><span
            class="method-args">(scope=nil) { || ... }</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Allow you to route based on whether a scope is <strong>not</strong>
authenticated. You can optionally specify which scope.</p>

<pre>unauthenticated do
  as :user do
    root to: &#39;devise/registrations#new&#39;
  end
end

root to: &#39;dashboard#show&#39;</pre>
          
          

          
          <div class="method-source-code" id="unauthenticated-source">
            <pre><span class="ruby-comment"># File lib/devise/rails/routes.rb, line 312</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">unauthenticated</span>(<span class="ruby-identifier">scope</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">constraint</span> = <span class="ruby-identifier">lambda</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">request</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">not</span> <span class="ruby-identifier">request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;warden&quot;</span>].<span class="ruby-identifier">authenticate?</span> <span class="ruby-identifier">scope</span><span class="ruby-operator">:</span> <span class="ruby-identifier">scope</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">constraints</span>(<span class="ruby-identifier">constraint</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">yield</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="protected-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Protected Instance Methods</h3>
       </header>

    
      <div id="method-i-constraints_for" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">constraints_for</span><span
            class="method-args">(method_to_apply, scope=nil, block=nil) { || ... }</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="constraints_for-source">
            <pre><span class="ruby-comment"># File lib/devise/rails/routes.rb, line 460</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">constraints_for</span>(<span class="ruby-identifier">method_to_apply</span>, <span class="ruby-identifier">scope</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">block</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">constraint</span> = <span class="ruby-identifier">lambda</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">request</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&#39;warden&#39;</span>].<span class="ruby-identifier">send</span>(<span class="ruby-identifier">method_to_apply</span>, <span class="ruby-identifier">scope</span><span class="ruby-operator">:</span> <span class="ruby-identifier">scope</span>) <span class="ruby-operator">&amp;&amp;</span>
      (<span class="ruby-identifier">block</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">block</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-string">&quot;warden&quot;</span>].<span class="ruby-identifier">user</span>(<span class="ruby-identifier">scope</span>)))
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">constraints</span>(<span class="ruby-identifier">constraint</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">yield</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://rdoc.rubyforge.org">RDoc</a> 4.1.2.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

